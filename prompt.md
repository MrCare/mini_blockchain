### 提示词

```
### 编程提示词：去中心化区块链系统设计与实现

**目标**：  
设计并实现一个简化版的区块链系统，支持工作量证明（PoW）共识机制、区块链接、网络广播与验证功能，并提供可视化演示。


#### **核心功能要求**
1. **工作量证明（PoW）机制**  
   - 实现基于SHA-256的PoW算法，难度目标为哈希值前4位为0（即`0000`开头）。
   - 设计区块结构体，包含以下字段：  
     ```python
     block = {
         'index': 区块编号,
         'timestamp': 时间戳,
         'transactions': [交易列表],
         'proof': 工作量证明值,
         'previous_hash': 前一区块哈希
     }
     ```
   - 实现`mine()`函数，计算符合难度要求的证明值。

2. **区块链结构**  
   - 使用链表或数组存储区块，确保每个区块的`previous_hash`正确指向父区块。
   - 实现创世区块（Genesis Block）的初始化逻辑。

3. **网络通信与广播**  
   - 设计点对点（P2P）网络协议，支持节点发现与连接。
   - 实现区块广播机制：当新块被挖出时，立即向全网广播。
   - 设计交易池（Transaction Pool），存储待确认的交易。

4. **验证机制**  
   - 实现区块验证函数，确保：  
     - 区块结构完整
     - 哈希值符合难度要求
     - `previous_hash`与父区块实际哈希一致
     - 交易合法性验证

5. **演示案例**  
   - 设计可视化界面或CLI工具，展示至少3个节点的网络。
   - 演示交易创建、区块挖矿、广播验证的完整流程。


#### **技术建议**
1. **编程语言选择**  
   - Python（简洁易实现，推荐使用Flask搭建HTTP API）

2. **网络层实现**  
   - 使用HTTP API实现节点间通信。
   - 建议采用JSON格式传输区块和交易数据。

3. **共识机制**  
   - 简化版PoW：无需考虑难度动态调整，固定前4位为0。

4. **数据存储**  
   - 可暂用内存存储区块链


#### **关键实现点**
1. **哈希计算**  
   - 使用SHA-256对区块头（index + timestamp + transactions + proof + previous_hash）进行哈希。

2. **工作量证明**  
   - 实现`valid_proof()`函数，验证哈希值是否满足难度要求。
   - 实现`proof_of_work()`函数，通过递增`proof`值找到有效解。

3. **网络同步**  
   - 当节点收到新区块时，验证其合法性并更新本地链。
   - 实现最长链原则：当出现分叉时，选择最长有效链。


#### **测试与验证**
1. 使用代码演示节点连接与pow和广播出块过程

通过以上设计，你将实现一个完整的、支持网络广播的区块链原型系统，清晰展示PoW共识机制的核心原理和区块链接的工作方式。
```